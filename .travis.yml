language: c
matrix:
  include:
    - name: "Windows gcc C"
      os: windows
      compiler: gcc
      env: MAKE="mingw32-make.exe" CMAKE_GENERATOR="MinGW Makefiles" CMAKE_SH="CMAKE_SH-NOTFOUND"
    - name: "Windows clang C"
      os: windows
      compiler: clang
      env: MAKE="mingw32-make.exe" CMAKE_GENERATOR="MinGW Makefiles" CMAKE_SH="CMAKE_SH-NOTFOUND"
    - name: "Linux gcc C"
      os: linux
      compiler: gcc
      env: MAKE="make" CMAKE_GENERATOR="Unix Makefiles"
    - name: "Linux clang C"
      os: linux
      compiler: clang
      env: MAKE="make" CMAKE_GENERATOR="Unix Makefiles"

before_script:
  - cmake --version
  - mkdir build
  - cd build
  - if ["$TRAVIS_OS_NAME" = "windows" ]; then cmake -B . -S $TRAVIS_BUILD_DIR; else cmake -B . -S $TRAVIS_BUILD_DIR; fi

script:
  - $MAKE all
